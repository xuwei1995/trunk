<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.serviceindeed.yike.yikemo.mapper.RoleMapper">
  <resultMap id="BaseResultMap" type="com.serviceindeed.yike.yikemo.domain.Role">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ROLE_ID" jdbcType="BIGINT" property="roleId" />
    <result column="ROLE_NAME" jdbcType="VARCHAR" property="roleName" />
    <result column="ROLE_DESC" jdbcType="VARCHAR" property="roleDesc" />
    <result column="IS_ENABLE" jdbcType="VARCHAR" property="isEnable" />
    <result column="ROLE_TYPE" jdbcType="VARCHAR" property="roleType" />
    <result column="CREATE_BY" jdbcType="BIGINT" property="createBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="CREATE_PLATFORM" jdbcType="VARCHAR" property="createPlatform" />
    <result column="CREATE_VERSION" jdbcType="VARCHAR" property="createVersion" />
    <result column="UPDATE_BY" jdbcType="BIGINT" property="updateBy" />
    <result column="UPDATE_DATE" jdbcType="TIMESTAMP" property="updateDate" />
    <result column="UPDATE_PLATFORM" jdbcType="VARCHAR" property="updatePlatform" />
    <result column="UPDATE_VERSION" jdbcType="VARCHAR" property="updateVersion" />
    <result column="CREATE_BY_NAME" jdbcType="VARCHAR" property="createByName"/>
    <result column="UPDATE_BY_NAME" jdbcType="VARCHAR" property="updateByName"/>
    <result column="IS_ENABLE_LABEL" jdbcType="VARCHAR" property="isEnableLabel"/>
    <result column="ROLE_TYPE_LABEL" jdbcType="VARCHAR" property="roleTypeLabel"/>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ROLE_ID, ROLE_NAME, ROLE_DESC, IS_ENABLE, ROLE_TYPE, CREATE_BY, CREATE_DATE, CREATE_PLATFORM, 
    CREATE_VERSION, UPDATE_BY, UPDATE_DATE, UPDATE_PLATFORM, UPDATE_VERSION
  </sql>
  <select id="getAllRoles" resultMap="BaseResultMap">
    SELECT
    r.ROLE_ID,
    r.ROLE_NAME,
    r.ROLE_TYPE,
    r.ROLE_DESC,
    r.IS_ENABLE,
    r.CREATE_BY,
    r.CREATE_DATE,
    r.CREATE_PLATFORM,
    r.CREATE_VERSION,
    r.UPDATE_BY,
    r.UPDATE_DATE,
    r.UPDATE_PLATFORM,
    r.UPDATE_VERSION,
    us.USER_NAME AS CREATE_BY_NAME,
    us2.USER_NAME AS UPDATE_BY_NAME,
    ge.KEY_VALUE  AS IS_ENABLE_LABEL,
    ge2.KEY_VALUE AS  ROLE_TYPE_LABEL
    FROM t_role AS r
    LEFT JOIN t_user AS us ON us.USER_ID = r.CREATE_BY
    LEFT JOIN t_user AS us2 ON us2.USER_ID = r.UPDATE_BY
    LEFT JOIN t_general AS ge ON ge.KEY_TYPE = 'IS_ENABLE'
    AND ge.KEY_CODE = r.IS_ENABLE
    LEFT JOIN t_general AS ge2 ON ge2.KEY_TYPE='ROLE_TYPE'
    AND ge2.KEY_CODE = r.ROLE_TYPE
    WHERE 1=1
    AND r.ROLE_TYPE !='TE'
    <if test="roleName !=null and roleName !='' ">
      AND  r.ROLE_NAME LIKE CONCAT('%',#{roleName},'%')
    </if>
    <if test="isEnable !=null and isEnable !='' ">
      AND  r.IS_ENABLE =#{isEnable}
    </if>
    <if test="sortField !=null and sortField !='' and sortDir !=null and sortDir!='' ">
      ORDER BY ${sortField} ${sortDir}
    </if>
    <if test="sortField ==null or sortField =='' ">
      ORDER BY r.ROLE_ID DESC
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_role
    where ROLE_ID = #{roleId,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from t_role
    where ROLE_ID = #{roleId,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.serviceindeed.yike.yikemo.domain.Role">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_role (ROLE_ID, ROLE_NAME, ROLE_DESC, 
      IS_ENABLE, ROLE_TYPE, CREATE_BY, 
      CREATE_DATE, CREATE_PLATFORM, CREATE_VERSION, 
      UPDATE_BY, UPDATE_DATE, UPDATE_PLATFORM, 
      UPDATE_VERSION)
    values (#{roleId,jdbcType=BIGINT}, #{roleName,jdbcType=VARCHAR}, #{roleDesc,jdbcType=VARCHAR}, 
      #{isEnable,jdbcType=VARCHAR}, #{roleType,jdbcType=VARCHAR}, #{createBy,jdbcType=BIGINT}, 
      #{createDate,jdbcType=TIMESTAMP}, #{createPlatform,jdbcType=VARCHAR}, #{createVersion,jdbcType=VARCHAR}, 
      #{updateBy,jdbcType=BIGINT}, #{updateDate,jdbcType=TIMESTAMP}, #{updatePlatform,jdbcType=VARCHAR}, 
      #{updateVersion,jdbcType=VARCHAR})
  </insert>
  <insert useGeneratedKeys="true"  keyProperty="roleId" id="insertSelective" parameterType="com.serviceindeed.yike.yikemo.domain.Role">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_role
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="roleId != null">
        ROLE_ID,
      </if>
      <if test="roleName != null">
        ROLE_NAME,
      </if>
      <if test="roleDesc != null">
        ROLE_DESC,
      </if>
      <if test="isEnable != null">
        IS_ENABLE,
      </if>
      <if test="roleType != null">
        ROLE_TYPE,
      </if>
      <if test="createBy != null">
        CREATE_BY,
      </if>
      <if test="createDate != null">
        CREATE_DATE,
      </if>
      <if test="createPlatform != null">
        CREATE_PLATFORM,
      </if>
      <if test="createVersion != null">
        CREATE_VERSION,
      </if>
      <if test="updateBy != null">
        UPDATE_BY,
      </if>
      <if test="updateDate != null">
        UPDATE_DATE,
      </if>
      <if test="updatePlatform != null">
        UPDATE_PLATFORM,
      </if>
      <if test="updateVersion != null">
        UPDATE_VERSION,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="roleId != null">
        #{roleId,jdbcType=BIGINT},
      </if>
      <if test="roleName != null">
        #{roleName,jdbcType=VARCHAR},
      </if>
      <if test="roleDesc != null">
        #{roleDesc,jdbcType=VARCHAR},
      </if>
      <if test="isEnable != null">
        #{isEnable,jdbcType=VARCHAR},
      </if>
      <if test="roleType != null">
        #{roleType,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null">
        #{createBy,jdbcType=BIGINT},
      </if>
      <if test="createDate != null">
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="createPlatform != null">
        #{createPlatform,jdbcType=VARCHAR},
      </if>
      <if test="createVersion != null">
        #{createVersion,jdbcType=VARCHAR},
      </if>
      <if test="updateBy != null">
        #{updateBy,jdbcType=BIGINT},
      </if>
      <if test="updateDate != null">
        #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updatePlatform != null">
        #{updatePlatform,jdbcType=VARCHAR},
      </if>
      <if test="updateVersion != null">
        #{updateVersion,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.serviceindeed.yike.yikemo.domain.Role">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_role
    <set>
      <if test="roleName != null">
        ROLE_NAME = #{roleName,jdbcType=VARCHAR},
      </if>
      <if test="roleDesc != null">
        ROLE_DESC = #{roleDesc,jdbcType=VARCHAR},
      </if>
      <if test="isEnable != null">
        IS_ENABLE = #{isEnable,jdbcType=VARCHAR},
      </if>
      <if test="roleType != null">
        ROLE_TYPE = #{roleType,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null">
        CREATE_BY = #{createBy,jdbcType=BIGINT},
      </if>
      <if test="createDate != null">
        CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="createPlatform != null">
        CREATE_PLATFORM = #{createPlatform,jdbcType=VARCHAR},
      </if>
      <if test="createVersion != null">
        CREATE_VERSION = #{createVersion,jdbcType=VARCHAR},
      </if>
      <if test="updateBy != null">
        UPDATE_BY = #{updateBy,jdbcType=BIGINT},
      </if>
      <if test="updateDate != null">
        UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updatePlatform != null">
        UPDATE_PLATFORM = #{updatePlatform,jdbcType=VARCHAR},
      </if>
      <if test="updateVersion != null">
        UPDATE_VERSION = #{updateVersion,jdbcType=VARCHAR},
      </if>
    </set>
    where ROLE_ID = #{roleId,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.serviceindeed.yike.yikemo.domain.Role">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_role
    set ROLE_NAME = #{roleName,jdbcType=VARCHAR},
      ROLE_DESC = #{roleDesc,jdbcType=VARCHAR},
      IS_ENABLE = #{isEnable,jdbcType=VARCHAR},
      ROLE_TYPE = #{roleType,jdbcType=VARCHAR},
      CREATE_BY = #{createBy,jdbcType=BIGINT},
      CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
      CREATE_PLATFORM = #{createPlatform,jdbcType=VARCHAR},
      CREATE_VERSION = #{createVersion,jdbcType=VARCHAR},
      UPDATE_BY = #{updateBy,jdbcType=BIGINT},
      UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP},
      UPDATE_PLATFORM = #{updatePlatform,jdbcType=VARCHAR},
      UPDATE_VERSION = #{updateVersion,jdbcType=VARCHAR}
    where ROLE_ID = #{roleId,jdbcType=BIGINT}
  </update>
</mapper>