<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.serviceindeed.yike.yikemo.mapper.RechargeMapper">
  <resultMap id="BaseResultMap" type="com.serviceindeed.yike.yikemo.domain.Recharge">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="RECHARGE_ID" jdbcType="BIGINT" property="rechargeId" />
    <result column="STUDENT_ID" jdbcType="BIGINT" property="studentId" />
    <result column="USER_ID" jdbcType="BIGINT" property="userId" />
    <result column="CARD_ID" jdbcType="BIGINT" property="cardId" />
    <result column="CREATE_BY" jdbcType="BIGINT" property="createBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="CREATE_PLATFORM" jdbcType="VARCHAR" property="createPlatform" />
    <result column="CREATE_VERSION" jdbcType="VARCHAR" property="createVersion" />
    <result column="userName" jdbcType="VARCHAR" property="userName"/>
    <result column="cardTypeValue" jdbcType="VARCHAR" property="cardTypeValue"/>
    <result column="createByName"  jdbcType="VARCHAR" property="createByName"/>
    <result column="cardNo"   jdbcType="VARCHAR" property="cardNo"/>
    <result column="IFK_CODE" jdbcType="VARCHAR" property="ifkCode"/>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    RECHARGE_ID, STUDENT_ID, USER_ID, CARD_ID, CREATE_BY, CREATE_DATE, CREATE_PLATFORM, 
    CREATE_VERSION
  </sql>
  <select id="getAllRecharges" resultMap="BaseResultMap">
    SELECT  us.IFK_CODE as IFK_CODE,card.CARD_NO as cardNo,rt.RECHARGE_TYPE_NAME as cardTypeValue,us2.USER_NAME as createByName,us.IFK_CODE,re.RECHARGE_ID, re.STUDENT_ID, re.USER_ID, re.CARD_ID, re.CREATE_BY, re.CREATE_DATE, re.CREATE_PLATFORM,
    re.CREATE_VERSION ,us.USER_NAME AS userName FROM t_recharge as re
    LEFT JOIN t_student AS st on st.STUDENT_ID=re.STUDENT_ID
    LEFT JOIN t_user    AS us on us.USER_ID=st.USER_ID
    LEFT JOIN t_user    AS us2 on us2.USER_ID=re.CREATE_BY
    LEFT JOIN t_card    as card on card.CARD_ID=re.CARD_ID
    LEFT JOIN t_recharge_type as rt on rt.RECHARGE_TYPE_ID=card.RECHARGE_TYPE
    WHERE 1=1
    <if test="studentId !=null ">
    AND  re.STUDENT_ID =#{studentId}
    </if>
    <if test="cardId !=null and cardId!=''">
      AND  re.CARD_ID =#{cardId}
    </if>
    <if test="startDate !=null ">
      and  date(re.CREATE_DATE)  &gt;=  date(#{startDate})
    </if>
    <if test="endDate !=null " >
       and date(re.CREATE_DATE) &lt;= date(#{endDate})
    </if>
    <if test="sortField !=null and sortField !='' and sortDir !=null and sortDir!='' ">
      ORDER BY ${sortField} ${sortDir}
    </if>
    <if test="sortField ==null or sortField =='' ">
      ORDER BY re.RECHARGE_ID DESC
    </if>

  </select>

  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_recharge
    where RECHARGE_ID = #{rechargeId,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from t_recharge
    where RECHARGE_ID = #{rechargeId,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.serviceindeed.yike.yikemo.domain.Recharge">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_recharge (RECHARGE_ID, STUDENT_ID, USER_ID, 
      CARD_ID, CREATE_BY, CREATE_DATE, 
      CREATE_PLATFORM, CREATE_VERSION)
    values (#{rechargeId,jdbcType=BIGINT}, #{studentId,jdbcType=BIGINT}, #{userId,jdbcType=BIGINT}, 
      #{cardId,jdbcType=BIGINT}, #{createBy,jdbcType=BIGINT}, #{createDate,jdbcType=TIMESTAMP}, 
      #{createPlatform,jdbcType=VARCHAR}, #{createVersion,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.serviceindeed.yike.yikemo.domain.Recharge">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_recharge
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="rechargeId != null">
        RECHARGE_ID,
      </if>
      <if test="studentId != null">
        STUDENT_ID,
      </if>
      <if test="userId != null">
        USER_ID,
      </if>
      <if test="cardId != null">
        CARD_ID,
      </if>
      <if test="createBy != null">
        CREATE_BY,
      </if>
      <if test="createDate != null">
        CREATE_DATE,
      </if>
      <if test="createPlatform != null">
        CREATE_PLATFORM,
      </if>
      <if test="createVersion != null">
        CREATE_VERSION,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="rechargeId != null">
        #{rechargeId,jdbcType=BIGINT},
      </if>
      <if test="studentId != null">
        #{studentId,jdbcType=BIGINT},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=BIGINT},
      </if>
      <if test="cardId != null">
        #{cardId,jdbcType=BIGINT},
      </if>
      <if test="createBy != null">
        #{createBy,jdbcType=BIGINT},
      </if>
      <if test="createDate != null">
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="createPlatform != null">
        #{createPlatform,jdbcType=VARCHAR},
      </if>
      <if test="createVersion != null">
        #{createVersion,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.serviceindeed.yike.yikemo.domain.Recharge">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_recharge
    <set>
      <if test="studentId != null">
        STUDENT_ID = #{studentId,jdbcType=BIGINT},
      </if>
      <if test="userId != null">
        USER_ID = #{userId,jdbcType=BIGINT},
      </if>
      <if test="cardId != null">
        CARD_ID = #{cardId,jdbcType=BIGINT},
      </if>
      <if test="createBy != null">
        CREATE_BY = #{createBy,jdbcType=BIGINT},
      </if>
      <if test="createDate != null">
        CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="createPlatform != null">
        CREATE_PLATFORM = #{createPlatform,jdbcType=VARCHAR},
      </if>
      <if test="createVersion != null">
        CREATE_VERSION = #{createVersion,jdbcType=VARCHAR},
      </if>
    </set>
    where RECHARGE_ID = #{rechargeId,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.serviceindeed.yike.yikemo.domain.Recharge">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_recharge
    set STUDENT_ID = #{studentId,jdbcType=BIGINT},
      USER_ID = #{userId,jdbcType=BIGINT},
      CARD_ID = #{cardId,jdbcType=BIGINT},
      CREATE_BY = #{createBy,jdbcType=BIGINT},
      CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
      CREATE_PLATFORM = #{createPlatform,jdbcType=VARCHAR},
      CREATE_VERSION = #{createVersion,jdbcType=VARCHAR}
    where RECHARGE_ID = #{rechargeId,jdbcType=BIGINT}
  </update>
</mapper>